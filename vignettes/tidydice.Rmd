---
title: "tidydice"
author: "Roland Krasser"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{explore}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

### Motivation

A basic understanding of probability and statistics is crucial for data understanding. A great way to teach probability and statistics is to start with an experiment, like rolling a dice or flipping a coin.

This package simulates rolling a dice and flipping a coin. Each experiment generates a tibble. Experiments can be combined with the pipe-operator.

tidydice package on Github: [https://github.com/rolkra/tidydice](https://github.com/rolkra/tidydice)

### Setup

As the tidydice-functions fits well into the tidyverse, we load the dplyr-package. For quick visualisations we use the explore-package.

```{r message=FALSE, warning=FALSE}
library(tidydice)
library(dplyr)
library(explore)
```

### Roll a dice

#### Roll a dice once

```{R echo=TRUE}
set.seed(123)
roll_dice()
```

Success is defined as result = 6 (as default), while result = 1..5 is not a success. In this case the result is 2, so it is no success.

#### Define success

If we would define result = 2 and result = 6 as success, it would be treated as success.

```{R echo=TRUE}
set.seed(123)
roll_dice(success = c(2,6))
```

#### Unfair dice

As default, the dice is fair. So every result (0..6) has the same probability. If you want, you can change this.

```{R echo=TRUE}
set.seed(123)
roll_dice(prob = c(0,0,0,0,0,1))
```

In this case we created a dice that always gets result = 6 (with 100% probability)

#### Untypically dice

As default the dice has 6 sides. If you want you can change this. Here we use a dice with 12 sides. result now can have a value between 1 and 12. But result = 6 is still the default success.

```{R echo=TRUE}
set.seed(123)
roll_dice(sides = 12)
```

#### Roll a dice 4 times

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 4)
```

We got 1 success

#### Define rounds

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 4, rounds = 2)
```

In the first round we got 1 success, in the secound round 2 success.

#### Use agg

A convenient way to aggregate the result, is to use the agg parameter. Now we get one line per round.

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 4, rounds = 2, agg = TRUE)
```

#### Visualise result

You can use any package/tool you like to visualise the result. In this example we use the explore-package.

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 100) %>% 
  explore(result, title = "Rolling a dice 100x")
```

In 15% of the cases we got a six. This is close to the expected value of 100/6 = 16.67%

If we increase the times parameter to 10000, the results are more balanced.

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 10000) %>% 
  explore(result, title = "Rolling a dice 10000x")
```

#### Visualise success

If we repeat the experiment rolling a dice 100x with rounds = 100, we get the distribution with a peak at about 17 (16.67 is the expected value)

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 100, rounds = 100, agg = TRUE) %>% 
  explore(success, 
          title = "Rolling a dice 100x",
          auto_scale = FALSE)
```

If we increase rounds from 100 to 10000 we get a more symmetric shape. We see that success below 5 and success above 30 are very unlikely.

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 100, rounds = 10000, agg = TRUE) %>% 
  explore(success, 
          title = "Rolling a dice 100x",
          auto_scale = FALSE)
```

#### Combine experiments

Let's add an experiment, where you have 10 extra dice. The shape changes.

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 100, rounds = 10000, agg = TRUE) %>% 
  roll_dice(times = 110, rounds = 10000, agg = TRUE) %>% 
  explore(success, 
          target = experiment,
          title = "Rolling a dice 100/110x",
          auto_scale = FALSE)
```

You can add as many experiments as you like (as long they generate the same data structure)

Adding an experiment with times = 150 will generate a smaller but wider shape.

```{R echo=TRUE}
set.seed(123)
roll_dice(times = 100, rounds = 10000, agg = TRUE) %>% 
  roll_dice(times = 110, rounds = 10000, agg = TRUE) %>% 
  roll_dice(times = 150, rounds = 10000, agg = TRUE) %>% 
  explore(success, 
          target = experiment,
          title = "Rolling a dice 100/110/150x",
          auto_scale = FALSE)
```

### Flip a coin

Internally the package handles coins as dice with only two sides. Success is defined as result = 2 (as default), while result = 1 is not a success.

#### Flip a coin 10x

```{R echo=TRUE}
set.seed(123)
flip_coin(times = 10)
```

In this case the result are 6x 2 and 4x 1. We can use the describe() function of the explore-package to get a good overview.

```{R echo=TRUE}
set.seed(123)
flip_coin(times = 10) %>% 
  describe(success)
```

Or just use the agg-parameter

```{R echo=TRUE}
set.seed(123)
flip_coin(times = 10, agg = TRUE)
```

### Define rounds

The parameter rounds can be used like in roll_dice().

```{R echo=TRUE}
set.seed(123)
flip_coin(times = 10, rounds = 5) %>% 
  explore(success, target = round)
```

#### Combine experiments

```{R echo=TRUE}
set.seed(123)
flip_coin(times = 10, agg = TRUE) %>% 
  flip_coin(times = 15, agg = TRUE)
```

